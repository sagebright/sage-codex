/* Import Google Fonts - must be before @tailwind directives */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light mode defaults (parchment theme) */
  :root {
    --color-bg: theme('colors.parchment.100');
    --color-bg-secondary: theme('colors.parchment.200');
    --color-text: theme('colors.ink.900');
    --color-text-secondary: theme('colors.ink.600');
    --color-border: theme('colors.ink.200');
    --color-accent: theme('colors.gold.DEFAULT');
    --color-accent-hover: theme('colors.gold.600');
    --color-danger: theme('colors.blood.DEFAULT');
  }

  /* Dark mode (deep purple theme - TTRPG persona) */
  .dark {
    --color-bg: theme('colors.shadow.950');           /* Deep purple-black #1a0f3a */
    --color-bg-secondary: theme('colors.shadow.900'); /* Surface purple #22145B */
    --color-surface: theme('colors.shadow.800');      /* Elevated purple #2d1a6b */
    --color-text: #e0d8ca;                            /* Cream/parchment */
    --color-text-secondary: #b8a990;                  /* Muted cream */
    --color-text-muted: #8a7d6d;                      /* Subtle */
    --color-border: rgba(215, 169, 100, 0.2);         /* Gold-tinted subtle */
    --color-border-medium: rgba(215, 169, 100, 0.4); /* Gold-tinted medium */
    --color-border-strong: theme('colors.gold.DEFAULT'); /* Gold solid */
    --color-accent: theme('colors.gold.DEFAULT');     /* Demiplane gold #d7a964 */
    --color-accent-hover: theme('colors.gold.400');   /* Lighter gold on hover */
    --color-danger: theme('colors.blood.500');
  }

  html {
    font-family: theme('fontFamily.sans');
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-parchment-100 text-ink-900 transition-colors duration-200;
  }

  .dark body {
    @apply bg-shadow-950 text-[#e0d8ca];
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    font-family: theme('fontFamily.serif');
    @apply font-semibold;
  }

  h1 {
    @apply text-heading-1;
  }

  h2 {
    @apply text-heading-2;
  }

  h3 {
    @apply text-heading-3;
  }

  h4 {
    @apply text-heading-4;
  }
}

@layer components {
  /* Fantasy button styles */
  .btn-primary {
    @apply px-5 py-2.5 bg-gold text-shadow-950 font-semibold rounded-fantasy shadow-fantasy
           hover:bg-gold-400 hover:shadow-gold-glow
           active:bg-gold-600
           transition-all duration-200
           disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply px-5 py-2.5 bg-transparent border-2 border-ink-300 text-ink-800 font-medium rounded-fantasy
           hover:bg-ink-100 hover:border-ink-400
           active:bg-ink-200
           transition-all duration-200
           disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .dark .btn-secondary {
    @apply border-[rgba(215,169,100,0.4)] text-[#e0d8ca]
           hover:bg-shadow-800 hover:border-gold hover:shadow-gold-glow-subtle;
  }

  /* Magic button variant */
  .btn-magic {
    @apply px-5 py-2.5 bg-magic text-white font-semibold rounded-fantasy shadow-fantasy
           hover:bg-magic-light hover:shadow-magic-glow
           active:bg-magic-dark
           transition-all duration-200
           disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .btn-danger {
    @apply px-4 py-2 bg-blood text-parchment-50 font-medium rounded-fantasy shadow-fantasy
           hover:bg-blood-600 hover:shadow-blood-glow
           active:bg-blood-700
           transition-all duration-200
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Fantasy card styles */
  .card {
    @apply bg-parchment-50 border-2 border-ink-200 rounded-fantasy shadow-fantasy p-5
           transition-all duration-200;
  }

  .card:hover {
    @apply shadow-fantasy-lg;
  }

  .dark .card {
    @apply bg-shadow-800 border-[rgba(215,169,100,0.2)];
  }

  .dark .card:hover {
    @apply border-[rgba(215,169,100,0.4)] shadow-gold-glow-subtle;
  }

  /* Decorative card variant for featured content */
  .card-decorative {
    @apply border-4 border-gold shadow-gold-glow;
  }

  .dark .card-decorative {
    @apply border-gold;
  }

  /* Fantasy input styles */
  .input {
    @apply w-full px-4 py-3 bg-parchment-50 border-2 border-ink-300 rounded-fantasy
           text-ink-900 placeholder-ink-400
           focus:outline-none focus:ring-2 focus:ring-gold/30 focus:border-gold
           transition-all duration-200;
  }

  .dark .input {
    @apply bg-[rgba(0,0,0,0.2)] border-[rgba(215,169,100,0.2)] text-[#e0d8ca] placeholder-[#8a7d6d]
           focus:ring-[rgba(215,169,100,0.3)] focus:border-gold;
  }

  /* ==========================================================================
   * Badge Size Constants
   *
   * Two badge size variants for context-aware sizing:
   * - Full (badge-full): Standalone badges, feature cards, emphasis areas
   * - Compact (badge-compact): Inline usage, stacked lists, dense layouts
   *
   * Usage Pattern:
   *   <span class="badge badge-full badge-rare">Rare Item</span>
   *   <span class="badge badge-compact badge-common">Common</span>
   *
   * Both sizes maintain readability in light/dark modes and use consistent
   * border-2 and rounded-lg styling from the design system.
   * ========================================================================== */

  /* Base badge styles (shared across all variants) */
  .badge {
    @apply inline-flex items-center text-xs font-semibold uppercase tracking-wide
           border transition-all duration-200;
  }

  /* Full badge: Standalone use, feature emphasis, spacious layouts
   * Use when: Hero sections, standalone tags, feature cards, modal headers
   * Provides: Generous padding, prominent visibility, touch-friendly target */
  .badge-full {
    @apply rounded-lg border-2 px-4 py-2;
  }

  /* Compact badge: Inline/stacked use, dense layouts, lists
   * Use when: Inline with text, tag lists, table cells, dense card grids
   * Provides: Minimal footprint, prevents visual bloat, maintains readability */
  .badge-compact {
    @apply rounded-lg border-2 px-3 py-1;
  }

  /* Default size fallback (matches compact for backward compatibility) */
  .badge:not(.badge-full):not(.badge-compact) {
    @apply rounded border px-3 py-1;
  }

  .badge-common {
    @apply bg-rarity-common/20 text-rarity-common border-rarity-common;
  }

  .badge-uncommon {
    @apply bg-rarity-uncommon/20 text-rarity-uncommon border-rarity-uncommon;
  }

  .badge-rare {
    @apply bg-rarity-rare/20 text-rarity-rare border-rarity-rare;
  }

  .badge-legendary {
    @apply bg-rarity-legendary/20 text-rarity-legendary border-rarity-legendary;
  }

  .badge-artifact {
    @apply bg-rarity-artifact/20 text-rarity-artifact border-rarity-artifact;
  }

  /* Content type badges */
  .badge-character {
    @apply bg-[#ee8600]/20 text-[#ee8600] border-[#ee8600];
  }

  .badge-spell {
    @apply bg-magic/20 text-magic border-magic;
  }

  .badge-monster {
    @apply bg-blood/20 text-blood border-blood;
  }

  .badge-item {
    @apply bg-gold/20 text-gold border-gold;
  }

  .badge-location {
    @apply bg-rarity-uncommon/20 text-rarity-uncommon border-rarity-uncommon;
  }
}

@layer utilities {
  /* Streaming text cursor animation */
  .streaming-cursor::after {
    content: 'â–‹';
    @apply text-gold ml-0.5;
    animation: cursor-blink 1s step-end infinite;
  }

  .dark .streaming-cursor::after {
    @apply text-gold-400;
  }

  @keyframes cursor-blink {
    50% {
      opacity: 0;
    }
  }

  /* Typing indicator bounce animation */
  .typing-dot {
    @apply w-2 h-2 bg-gold rounded-full;
    animation: typing-bounce 1.4s infinite ease-in-out both;
  }

  .typing-dot:nth-child(1) {
    animation-delay: 0s;
  }

  .typing-dot:nth-child(2) {
    animation-delay: 0.2s;
  }

  .typing-dot:nth-child(3) {
    animation-delay: 0.4s;
  }

  @keyframes typing-bounce {
    0%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-6px);
    }
  }

  .dark .typing-dot {
    @apply bg-gold-400;
  }

  /* Fantasy text utilities */
  .text-fantasy-title {
    @apply font-serif text-display text-ink-950;
  }

  .dark .text-fantasy-title {
    @apply text-parchment-50;
  }

  /* Gold accent text */
  .text-gold-accent {
    @apply text-gold-600;
  }

  .dark .text-gold-accent {
    @apply text-gold-400;
  }

  /* Gold-tinted border utilities */
  .border-gold-subtle {
    border-color: rgba(215, 169, 100, 0.2);
  }

  .border-gold-medium {
    border-color: rgba(215, 169, 100, 0.4);
  }

  .border-gold-strong {
    @apply border-gold;
  }

  .border-decorative {
    @apply border-4 border-[#f0c75e];
  }

  /* Scrollbar styling for dark mode */
  .scrollbar-fantasy {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.ink.300') transparent;
  }

  .dark .scrollbar-fantasy {
    scrollbar-color: rgba(215, 169, 100, 0.3) transparent;
  }

  .scrollbar-fantasy::-webkit-scrollbar {
    width: 8px;
  }

  .scrollbar-fantasy::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-fantasy::-webkit-scrollbar-thumb {
    @apply bg-ink-300 rounded-full;
  }

  .dark .scrollbar-fantasy::-webkit-scrollbar-thumb {
    background: rgba(215, 169, 100, 0.3);
    @apply rounded-full;
  }

  /* ==========================================================================
   * Shared Focus Ring Utility
   *
   * Consistent keyboard accessibility pattern for all interactive elements.
   * Use on buttons, links, inputs, and custom interactive components.
   *
   * Usage: Add `.focus-ring` class to any focusable element
   * Pattern: focus:outline-none focus:ring-2 focus:ring-gold-400
   *          focus:ring-offset-2 focus:ring-offset-parchment-100
   *          dark:focus:ring-offset-shadow-900
   * ========================================================================== */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-gold-400 focus:ring-offset-2
           focus:ring-offset-parchment-100 dark:focus:ring-offset-shadow-900;
  }

  /* Legacy focus glow utility (kept for backward compatibility) */
  .focus-gold-glow:focus {
    @apply outline-none ring-0;
    box-shadow: 0 0 0 3px rgba(215, 169, 100, 0.3);
  }

  /* ==========================================================================
   * Fantasy Animation Utilities
   *
   * Atmospheric animations for TTRPG persona - "expressive, atmospheric"
   * All non-essential animations respect prefers-reduced-motion
   * ========================================================================== */

  /* Selection glow animation - subtle pulse when item is selected */
  @keyframes selection-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(215, 169, 100, 0);
    }
    50% {
      box-shadow: 0 0 12px 2px rgba(215, 169, 100, 0.4);
    }
  }

  /* Soft pulse animation for active elements */
  @keyframes soft-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.85;
    }
  }

  /* Phase dot glow animation for current phase indicator */
  @keyframes phase-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(215, 169, 100, 0.4);
    }
    50% {
      box-shadow: 0 0 8px 3px rgba(215, 169, 100, 0.3);
    }
  }

  /* Progress bar shimmer effect */
  @keyframes progress-shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Animation utility classes with reduced motion support */
  .animate-selection-glow {
    animation: selection-glow 2s ease-in-out;
  }

  .animate-soft-pulse {
    animation: soft-pulse 2s ease-in-out infinite;
  }

  .animate-phase-glow {
    animation: phase-glow 2s ease-in-out infinite;
  }

  /* Hover glow effect for interactive elements */
  .hover-glow {
    @apply transition-shadow duration-200;
  }

  .hover-glow:hover {
    box-shadow: 0 0 15px rgba(215, 169, 100, 0.25);
  }

  .dark .hover-glow:hover {
    box-shadow: 0 0 20px rgba(215, 169, 100, 0.3);
  }

  /* Hover lift effect for cards */
  .hover-lift {
    @apply transition-all duration-200;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
  }

  /* Progress bar with shimmer effect */
  .progress-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.2) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
  }

  /* Reduced motion support - disable non-essential animations */
  @media (prefers-reduced-motion: reduce) {
    .animate-selection-glow,
    .animate-soft-pulse,
    .animate-phase-glow {
      animation: none;
    }

    .hover-lift:hover {
      transform: none;
    }

    .progress-shimmer {
      animation: none;
      background: none;
    }

    /* Remove transition delays for faster response */
    .hover-glow,
    .hover-lift {
      transition-duration: 0.01ms;
    }
  }
}
